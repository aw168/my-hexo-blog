//- 雪花特效的画布
- const not_cover = !(typeof page.not_cover ==='undefined' ? false : page.not_cover)
header#page-header(class=(is_post() && not_cover) || is_home() ? 'post-bg' : 'not-top-img')
    include ./nav.pug

    if is_home()
      //- 雪花特效的画布
      #particles-js
      
      //- 自定义内容区域
      .author-info-box#author-info-box
        .author-avatar
          img(src="https://awtc.pp.ua/1745514532958.png", alt="author avatar")
        .author-name 阿伟博客
        .author-description 阿伟博客欢迎您!
        .additional-links.hero-social-icons
          a(href="https://github.com/iawooo", target="_blank", rel="noopener", aria-label="Github", title="Github")
            i.fab.fa-github
          a(href="https://t.me/awcttbot", target="_blank", rel="noopener", aria-label="Telegram", title="Telegram")
            i.fab.fa-telegram-plane
          a(href="mailto:iawooo@qq.com", aria-label="Email", title="Email")
            i.fas.fa-envelope
      
      //- 向下滚动箭头
      a.hero-scroll-down(href="#content-inner")
        i.fas.fa-chevron-down

    if is_post()
        if !page.not_cover
            include ./widgets/post/postMeta.pug

//- 【最终版JS】使用了更精致、更自然的雪花参数
if is_home()
  script.
    document.addEventListener('DOMContentLoaded', function () {
      particlesJS("particles-js", {
        "particles": {
          "number": {
            "value": 128, // 【优化】减少雪花数量
            "density": { "enable": true, "value_area": 800 }
          },
          "color": { "value": "#ffffff" },
          "shape": { "type": "circle" },
          "opacity": {
            "value": 0.7, // 【优化】降低雪花透明度，使其更柔和
            "random": true,
            "anim": { "enable": true, "speed": 0.4, "opacity_min": 0.1, "sync": false }
          },
          "size": {
            "value": 4, // 【优化】减小雪花尺寸
            "random": true,
            "anim": { "enable": false } // 关闭大小变化，感觉更宁静
          },
          "line_linked": { "enable": false },
          "move": {
            "enable": true,
            "speed": 1, // 【优化】大幅减慢飘落速度
            "direction": "bottom",
            "random": true, // 开启随机方向，避免直线掉落
            "straight": false,
            "out_mode": "out",
            "bounce": false,
            "attract": { "enable": false }
          }
        },
        "interactivity": {
          "detect_on": "canvas",
          "events": {
            "onhover": {
              "enable": true // 关闭鼠标悬停互动，让特效更纯粹
            },
            "onclick": { "enable": false },
            "resize": true
          }
        },
        "retina_detect": true
      });
    });